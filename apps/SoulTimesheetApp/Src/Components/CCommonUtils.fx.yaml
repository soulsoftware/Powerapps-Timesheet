CCommonUtils As CanvasComponent:
    GetCurrentWeekNumber(pYear As Number):
        pYear:
            Default: =100
        ThisProperty:
            Default: |-
                =With({
                    dateToEvaluate: Today(),
                    adjustment: If( ISOWeekNum( Date(pYear,1,1) ) > 1, 1, 0)
                },
                If( Year(dateToEvaluate) = pYear,
                    WeekNum(dateToEvaluate) + adjustment
                /*
                    With({
                            date1: Date(
                                Year(dateToEvaluate - Weekday(dateToEvaluate - 1) + 4),
                                1,
                                3
                            )
                        },
                        With({
                                rup: RoundUp( dateToEvaluate - date1, 0),
                                wd: Weekday(date1) + 5
                            },
                            RoundDown( (rup + wd) / 7, 0 ) + 1
                        )
                    )*/,
                    1
                ))
    GetDateFromWeekNumber(pWeekNumber As Number, pYear As Number):
        pWeekNumber:
            Default: =100
        pYear:
            Default: =100
        ThisProperty:
            Default: |
                =//
                // http://powerappsguide.com/blog/post/get-start-date-from-week-number
                //
                With({weekDate: DateAdd(Date(pYear,1,1), 7* pWeekNumber)},
                    DateAdd(weekDate,
                            -(Weekday(weekDate)),
                            TimeUnit.Days
                    )
                )
    GetWeekDayText(Date As DateTime):
        Date:
            Default: =Now()
        ThisProperty:
            Default: =Switch(Weekday( Date ), 1, "Sun", 2, "Mon", 3, "Tue", 4, "Wed", 5, "Thu", 6, "Fri", 7, "Sat") 
    GetWeekNumber(Date As DateTime):
        Date:
            Default: =Now()
        ThisProperty:
            Default: |-
                =With({
                    adjustment: If( ISOWeekNum( Date(Year(Date),1,1) ) > 1, 1, 0)
                },
                WeekNum( Date ) + adjustment )
                // WeekNum( Date , StartOfWeek.Monday )
                // ISOWeekNum( Date )
    IsWorkingHoursValid(Minutes As Number):
        Minutes:
            Default: =100
        ThisProperty:
            Default: =And( Minutes > 0, Minutes < 24*60 )
    Fill: =RGBA(0, 0, 0, 0)
    Height: =100
    Width: =400
    X: =0
    Y: =0
    ZIndex: =1

